# SideTradeCA-02-WIP

## 1. Loading Customer & Order Data


**Create Schema**

Syntax: `CREATE SCHEMA $SchemaName$;`

Tasks :

1. Replace $SchemaName$ with an appropriate schema name


**Create Table's**

SideTradeCA-02\DatabaseScripts
- create_customer_table.sql
- create_order_table.sql

1. Replace $SchemaName$ with your schema name


**Load Data**

\copy $SchemaName$.customer(customer_id,customer_name, email, phone_number, address_line_1, city) FROM '$RespositoryDirectory$\SideTradeCA-02\DataFiles\customer.csv' DELIMITER '|' CSV HEADER
\copy $SchemaName$.order(order_id, customer_id, order_date, total_amount, order_status_id) FROM '$RespositoryDirectory$\SideTradeCodeAcademy\SideTradeCA-02\DataFiles\order.csv' DELIMITER '|' CSV HEADER

Replace $SchemaName$ with your schema name
Replace $RespositoryDirectory$ with your repository home directory e.g C:\Code\SideTradeCodeAcademy



## 2. Querying Customer Data


**SELECT - Query data from a single table**

Syntax:

`SELECT  
   column_1,  
   column_2,  
   ...  
FROM  
   table_name`  
   
Tasks:    

1. Select Customer Name 
2. Select Customer Name & Email 
3. Select Customer Columns


**ORDER BY - Sort the result set returned from a query**

Syntax: 

`SELECT
   column_1,
   column_2
FROM
   table_name
ORDER BY
   column_1 ASC,
   column_2 DESC;`
   
Tasks:    
   
1. Sorts Customers by the Name in ascending order
2. Sorts Customers by the Name in descending order

**SELECT DISTINCT – remove duplicate rows in the result set**


Syntax: 

`SELECT
   DISTINCT column_1
FROM
   table_name;`
   
Tasks:    
   
1. Select distinct Cities 
2. Select distinct Cities, sorted in ascending order



## 3. Filtering Customer Data

**WHERE – filters rows based on a specified condition**

Syntax:

`SELECT select_list
FROM table_name
WHERE condition;`

Tasks: 

1. Select Customers from Birmingham
2. Select Customers from Birmingham or London
3. Select Customers not from Birmingham
4. Select Orders after 30th June 2019 
5. Select Orders equal to or greater £100
6. Select Orders after 30th June 2019, and equal to or greater £100 


**LIMIT – gets a subset of rows generated by a query**

Syntax: 

`SELECT
   *
FROM
   table_name
LIMIT n;`

Tasks: 

1. Select top 5 Orders by Value


**IS NULL – checks if a value is null or not**

Syntax: 

`value IS NULL`
`value IS NOT NULL`

Tasks : 

1. Select Customer with No Phone Number
2. Select Customers with Phone Numbers


**Table & column aliases – how to use table and column aliases in a query**

`SELECT
    column_list
FROM
    table_name AS alias_name;`

`SELECT column_name AS alias_name
FROM table;`



## 4. Joining Multiple Tables - 


**INNER JOIN – selects rows from one table that have the corresponding rows in other tables**

Syntax: 

`SELECT
   A.pka,
   A.c1,
   B.pkb,
   B.c2
FROM
   A
INNER JOIN B ON A .pka = B.fka;`

1. Select all orders for each Customer (Customer Name, Order Date and Order Amount).  


**LEFT JOIN – selects rows from one table that may or may not have the corresponding rows in other tables**

Syntax: 

`SELECT
   A.pka,
   A.c1,
   B.pkb,
   B.c2
FROM
   A
LEFT JOIN B ON A .pka = B.fka;`

1. Select all orders for each Customer (Customer Name, Order Date and Order Amount).  Include Customers who have never ordered.   



## 5. Grouping Data


**GROUP BY – divides rows into groups and applies an aggregate function on each**

Syntax: 

SELECT column_1, aggregate_function(column_2)
FROM tbl_name
GROUP BY column_1;

Tasks: 

1.  Select number of Customers for each City
2.  Select first Order date for each Customer 
3.  Select most recent Order date for each Customer
4.  Select total spend for each Customers (Select only Customers who have ordered at least once)
5.  Select total spend for each Customers (Include Customers who have never ordered)
